.navbar-fixed-container {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    display: flex;
    justify-content: center;
    padding-top: 8px;
    padding-bottom: 50px;
    z-index: 2000;
    pointer-events: none;
}

/* Tablet pequeño */
@media (min-width: 480px) {
  .navbar-fixed-container {
    padding-top: 10px;
    padding-bottom: 55px;
  }
}

/* Tablet */
@media (min-width: 768px) {
  .navbar-fixed-container {
    padding-top: 12px;
    padding-bottom: 60px;
  }
}

/* Desktop */
@media (min-width: 1024px) {
  .navbar-fixed-container {
    padding-top: 15px;
    padding-bottom: 60px;
  }
}

.navbar-fixed-container > * {
    pointer-events: auto;    /* Los clics funcionan dentro del cristal */
}

.glass-surface {
  /* Quitar `contain: strict` para que `backdrop-filter` pueda
     sample correctamente el fondo en navegadores móviles. */
  isolation: isolate;      /* Crea una capa de renderizado nueva */
  margin-left: auto;
  margin-right: auto;
}

/* Forzar composición por GPU y avisar al navegador que el filtro puede cambiar.
  Esto ayuda a que iOS/Safari aplique correctamente backdrop-filter en el primer paint. */
.glass-surface,
.glass-surface--fallback,
.glass-surface--svg {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  will-change: transform, backdrop-filter;
}

.glass-surface {
  /* Usar position: fixed para que el SVG renderice correctamente el efecto glass
     en todos los dispositivos, incluyendo iOS al recargar. */
  position: fixed;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  transition: opacity 0.26s ease-out;
}

/* Mantener relative solo en tablet pequeño para evitar solapamiento */
@media (max-width: 767px) and (max-height: 600px) {
  .glass-surface {
    position: relative;
  }
}

/* En pantallas normales desktop/tablet mantener fixed */
@media (min-width: 768px) {
  .glass-surface {
    position: fixed;
  }
}

.glass-surface__filter {
  width: 100%;
  height: 100%;
  pointer-events: none;
  position: absolute;
  inset: 0;
  opacity: 0;
  z-index: -1;
}

.glass-surface__content {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.3rem;
  border-radius: inherit;
  position: relative;
  z-index: 1;
}

@media (min-width: 480px) {
  .glass-surface__content {
    padding: 0.4rem;
  }
}

@media (min-width: 768px) {
  .glass-surface__content {
    padding: 0.5rem;
  }
}

.glass-surface--svg {
  background: light-dark(hsl(0 0% 100% / var(--glass-frost, 0)), hsl(0 0% 0% / var(--glass-frost, 0)));
  backdrop-filter: var(--filter-id, url(#glass-filter)) saturate(var(--glass-saturation, 1));
  box-shadow:
    0 0 2px 1px light-dark(color-mix(in oklch, black, transparent 85%), color-mix(in oklch, white, transparent 65%))
      inset,
    0 0 10px 4px light-dark(color-mix(in oklch, black, transparent 90%), color-mix(in oklch, white, transparent 85%))
      inset,
    0px 4px 16px rgba(17, 17, 26, 0.05),
    0px 8px 24px rgba(17, 17, 26, 0.05),
    0px 16px 56px rgba(17, 17, 26, 0.05),
    0px 4px 16px rgba(17, 17, 26, 0.05) inset,
    0px 8px 24px rgba(17, 17, 26, 0.05) inset,
    0px 16px 56px rgba(17, 17, 26, 0.05) inset;
}

.glass-surface--fallback {
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(12px) saturate(1.8) brightness(1.1);
  -webkit-backdrop-filter: blur(12px) saturate(1.8) brightness(1.1);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow:
    0 8px 32px 0 rgba(31, 38, 135, 0.2),
    0 2px 16px 0 rgba(31, 38, 135, 0.1),
    inset 0 1px 0 0 rgba(255, 255, 255, 0.4),
    inset 0 -1px 0 0 rgba(255, 255, 255, 0.2);
}

/* Mejora la compatibilidad en iOS: asegurar que el área de fondo
   se recorta correctamente y el filtro se aplica al fondo visible. */
.glass-surface--fallback,
.glass-surface--svg {
  background-clip: padding-box;
}

/* Fallback visual para navegadores que NO soportan backdrop-filter
   (Chrome en iOS suele no exponerlo). Esto añade un degradado
   translúcido y un borde para simular el efecto de vidrio. */
@supports not ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) {
  .glass-surface--fallback,
  .glass-surface--svg {
    background: linear-gradient(90deg, rgba(132, 0, 255, 0.12), rgba(6, 0, 16, 0.36));
    border: 1px solid rgba(132, 0, 255, 0.18);
    box-shadow: 0 8px 32px rgba(132, 0, 255, 0.06), 0 2px 8px rgba(0, 0, 0, 0.6);
    /* asegurar que no intente aplicar filtros inexistentes */
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }

  @media (max-width: 480px) {
    .glass-surface--fallback,
    .glass-surface--svg {
      background: linear-gradient(90deg, rgba(132, 0, 255, 0.18), rgba(6, 0, 16, 0.42));
    }
  }
}

/* Forzar fallback cuando JS detecta que no hay soporte (iOS).
   Usar gradiente TRANSLÚCIDO para que parezca glass, no opaco */
.glass-surface.no-backdrop.glass-surface--fallback {
  background: linear-gradient(135deg, rgba(132, 0, 255, 0.15), rgba(75, 0, 130, 0.22)) !important;
  backdrop-filter: blur(10px) saturate(1.5) !important;
  -webkit-backdrop-filter: blur(10px) saturate(1.5) !important;
  border: 1px solid rgba(132, 0, 255, 0.25) !important;
  box-shadow: 
    0 0 20px rgba(132, 0, 255, 0.15),
    0 8px 32px rgba(132, 0, 255, 0.1), 
    inset 0 1px 2px rgba(255, 255, 255, 0.1),
    inset 0 -1px 1px rgba(0, 0, 0, 0.2) !important;
}

.glass-surface.no-backdrop.glass-surface--svg {
  background: linear-gradient(135deg, rgba(132, 0, 255, 0.15), rgba(75, 0, 130, 0.22)) !important;
  backdrop-filter: blur(10px) saturate(1.5) !important;
  -webkit-backdrop-filter: blur(10px) saturate(1.5) !important;
  border: 1px solid rgba(132, 0, 255, 0.25) !important;
  box-shadow: 
    0 0 20px rgba(132, 0, 255, 0.15),
    0 8px 32px rgba(132, 0, 255, 0.1), 
    inset 0 1px 2px rgba(255, 255, 255, 0.1),
    inset 0 -1px 1px rgba(0, 0, 0, 0.2) !important;
}

@media (max-width: 480px) {
  .glass-surface.no-backdrop.glass-surface--fallback,
  .glass-surface.no-backdrop.glass-surface--svg {
    background: linear-gradient(135deg, rgba(132, 0, 255, 0.18), rgba(75, 0, 130, 0.28)) !important;
    border: 1.5px solid rgba(132, 0, 255, 0.3) !important;
    box-shadow: 
      0 0 25px rgba(132, 0, 255, 0.2),
      0 8px 32px rgba(132, 0, 255, 0.15),
      inset 0 1px 2px rgba(255, 255, 255, 0.12),
      inset 0 -1px 1px rgba(0, 0, 0, 0.25) !important;
  }
}

@media (prefers-color-scheme: dark) {
  .glass-surface--fallback {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px) saturate(1.8) brightness(1.2);
    -webkit-backdrop-filter: blur(12px) saturate(1.8) brightness(1.2);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow:
      inset 0 1px 0 0 rgba(255, 255, 255, 0.2),
      inset 0 -1px 0 0 rgba(255, 255, 255, 0.1);
  }
}

@supports not (backdrop-filter: blur(10px)) {
  .glass-surface--fallback {
    background: rgba(255, 255, 255, 0.4);
    box-shadow:
      inset 0 1px 0 0 rgba(255, 255, 255, 0.5),
      inset 0 -1px 0 0 rgba(255, 255, 255, 0.3);
  }

  .glass-surface--fallback::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(255, 255, 255, 0.15);
    border-radius: inherit;
    z-index: -1;
  }
}

@supports not (backdrop-filter: blur(10px)) {
  @media (prefers-color-scheme: dark) {
    .glass-surface--fallback {
      background: rgba(0, 0, 0, 0.4);
    }

    .glass-surface--fallback::before {
      background: rgba(255, 255, 255, 0.05);
    }
  }
}

.glass-surface:focus-visible {
  outline: 2px solid light-dark(#007aff, #0a84ff);
  outline-offset: 2px;
}
